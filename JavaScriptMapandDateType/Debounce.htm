<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Debounce </title>

<!-- Bootstrap CSS only, no custom CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

</head>
<body class="p-4">

<h2 class="mb-3">Debounce </h2>
<p>Debounce is a technique of delaying the execution of a function for a certain amount of time by using setTimeout() and clearTimeout(). The main goal is to reduce unnecessary and expensive operations.</p>

<!-- Button to increase volume -->
<button class="btn btn-primary me-2" onclick="increaseVolume()">Volume +</button>

<!-- Button to stop volume at 80% -->
<button class="btn btn-danger" onclick="stopAt80()">Stop at 80%</button>

<!-- Progress bar to visually show volume -->
<div class="progress mt-4" style="height: 25px;">
  <div id="fill" class="progress-bar" role="progressbar"></div>
</div>

<!-- Text display of current volume -->
<p class="mt-3" id="text">Volume: 0%</p>

<script>
  // Stores the current volume level
  let volume = 0;

  // Flag to prevent multiple volume processes running at the same time
  let running = false;

  // Holds the interval ID so we can stop it later
  let interval;

  // Updates the progress bar and text on screen
  function render() {
    document.getElementById("fill").style.width = volume + "%";
    document.getElementById("text").innerText = "Volume: " + volume + "%";
  }

  // Starts increasing the volume gradually
  function increaseVolume() {

    // If volume process is already running, ignore the click
    if (running) return;

    running = true;

    // Every 200ms increase volume by 5%
    interval = setInterval(() => {

      // If volume reaches 100%, stop increasing
      if (volume >= 100) {
        clearInterval(interval);
        running = false;
        return;
      }

      // Increase volume value
      volume += 5;

      // Update UI
      render();

    }, 200);
  }

  // Stops volume increase when it reaches 80%
  function stopAt80() {
    if (volume >= 80) {
      clearInterval(interval);
      running = false;
    }
  }
</script>

</body>
</html>
